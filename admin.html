<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Indigenous Art Atlas</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="admin-body">
    <!-- Admin Navigation -->
    <header class="admin-navbar">
        <div class="admin-nav-container">
            <div class="admin-brand">
                <i class="fas fa-cogs"></i>
                <span>Admin Panel</span>
            </div>
            <nav class="admin-nav-menu">
                <a href="index.html" class="nav-link">
                    <i class="fas fa-home"></i> Main Site
                </a>
            </nav>
            <div class="admin-user">
                <span class="admin-username"></span>
                <button onclick="logout()" class="btn btn-outline btn-small">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </div>
    </header>

    <!-- Admin Sidebar -->
    <aside class="admin-sidebar">
        <div class="sidebar-menu">
            <button class="sidebar-item active" onclick="showAdminSection('dashboard')">
                <i class="fas fa-tachometer-alt"></i>
                <span>Dashboard</span>
            </button>
            <button class="sidebar-item" onclick="showAdminSection('submissions')">
                <i class="fas fa-image"></i>
                <span>Submissions</span>
                <span class="badge" id="pending-badge">0</span>
            </button>
            <button class="sidebar-item" onclick="showAdminSection('users')">
                <i class="fas fa-users"></i>
                <span>Users</span>
            </button>
            <button class="sidebar-item" onclick="showAdminSection('categories')">
                <i class="fas fa-tags"></i>
                <span>Categories</span>
            </button>
            <button class="sidebar-item" onclick="showAdminSection('reports')">
                <i class="fas fa-flag"></i>
                <span>Reports</span>
                <span class="badge" id="reports-badge">0</span>
            </button>
            <button class="sidebar-item" onclick="showAdminSection('analytics')">
                <i class="fas fa-chart-bar"></i>
                <span>Analytics</span>
            </button>
        </div>
    </aside>

    <!-- Admin Main Content -->
    <main class="admin-main">
        <!-- Dashboard Section -->
        <div id="admin-dashboard" class="admin-section active">
            <div class="section-header">
                <h1>Dashboard Overview</h1>
                <div class="last-updated">
                    Last updated: <span id="last-updated"></span>
                </div>
            </div>

            <!-- Stats Grid -->
            <div class="admin-stats-grid">
                <div class="admin-stat-card">
                    <div class="stat-icon pending">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="pending-submissions-count">0</h3>
                        <p>Pending Submissions</p>
                    </div>
                </div>
                <div class="admin-stat-card">
                    <div class="stat-icon approved">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="total-artworks-count">0</h3>
                        <p>Total Artworks</p>
                    </div>
                </div>
                <div class="admin-stat-card">
                    <div class="stat-icon users">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="total-users-count">0</h3>
                        <p>Registered Users</p>
                    </div>
                </div>
                <div class="admin-stat-card">
                    <div class="stat-icon reports">
                        <i class="fas fa-flag"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="open-reports-count">0</h3>
                        <p>Open Reports</p>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="recent-activity">
                <h2>Recent Activity</h2>
                <div class="activity-list" id="recent-activity">
                    <!-- Recent activity items will be populated by JavaScript -->
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <h2>Quick Actions</h2>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="showAdminSection('submissions')">
                        <i class="fas fa-eye"></i> Review Submissions
                    </button>
                    <button class="btn btn-outline" onclick="showAdminSection('users')">
                        <i class="fas fa-user-plus"></i> Manage Users
                    </button>
                    <button class="btn btn-outline" onclick="showAdminSection('categories')">
                        <i class="fas fa-tags"></i> Manage Categories
                    </button>
                </div>
            </div>
        </div>

        <!-- Submissions Section -->
        <div id="admin-submissions" class="admin-section">
            <div class="section-header">
                <h1>Art Submissions</h1>
                <div class="section-filters">
                    <select id="submission-status-filter">
                        <option value="pending">Pending Review</option>
                        <option value="approved">Approved</option>
                        <option value="rejected">Rejected</option>
                        <option value="all">All Submissions</option>
                    </select>
                </div>
            </div>

            <div class="submissions-list" id="admin-submissions-list">
                <!-- Submissions will be populated by JavaScript -->
            </div>

            <div class="empty-state" id="submissions-empty" style="display: none;">
                <i class="fas fa-image"></i>
                <h3>No submissions found</h3>
                <p>No submissions match the current filter criteria</p>
            </div>
        </div>

        <!-- Users Section -->
        <div id="admin-users" class="admin-section">
            <div class="section-header">
                <h1>User Management</h1>
                <div class="section-filters">
                    <input type="text" id="user-search" placeholder="Search users...">
                    <select id="user-type-filter">
                        <option value="all">All Users</option>
                        <option value="general">General Public</option>
                        <option value="artist">Artists</option>
                        <option value="admin">Administrators</option>
                    </select>
                </div>
            </div>

            <div class="users-table-container">
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>User</th>
                            <th>Email</th>
                            <th>Type</th>
                            <th>Joined</th>
                            <th>Submissions</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="users-table-body">
                        <!-- Users will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Categories Section -->
        <div id="admin-categories" class="admin-section">
            <div class="section-header">
                <h1>Category Management</h1>
                <button class="btn btn-primary" onclick="addCategory()">
                    <i class="fas fa-plus"></i> Add Category
                </button>
            </div>

            <div class="categories-grid">
                <div class="category-section">
                    <h3>Art Types</h3>
                    <div class="category-list" id="art-types-list">
                        <!-- Art types will be populated by JavaScript -->
                    </div>
                </div>
                <div class="category-section">
                    <h3>Art Periods</h3>
                    <div class="category-list" id="art-periods-list">
                        <!-- Art periods will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Reports Section -->
        <div id="admin-reports" class="admin-section">
            <div class="section-header">
                <h1>Content Reports</h1>
                <div class="section-filters">
                    <select id="report-status-filter">
                        <option value="open">Open Reports</option>
                        <option value="resolved">Resolved Reports</option>
                        <option value="all">All Reports</option>
                    </select>
                </div>
            </div>

            <div class="reports-list" id="admin-reports-list">
                <!-- Reports will be populated by JavaScript -->
            </div>
        </div>

        <!-- Analytics Section -->
        <div id="admin-analytics" class="admin-section">
            <div class="section-header">
                <h1>Analytics</h1>
                <div class="date-range">
                    <label>Date Range:</label>
                    <input type="date" id="analytics-start-date">
                    <input type="date" id="analytics-end-date">
                    <button class="btn btn-outline" onclick="updateAnalytics()">Update</button>
                </div>
            </div>

            <div class="analytics-grid">
                <div class="analytics-card">
                    <h3>Submissions Over Time</h3>
                    <div class="chart-placeholder">
                        <i class="fas fa-chart-line"></i>
                        <p>Chart would display submission trends</p>
                    </div>
                </div>
                <div class="analytics-card">
                    <h3>Art Types Distribution</h3>
                    <div class="chart-placeholder">
                        <i class="fas fa-chart-pie"></i>
                        <p>Chart would show art type breakdown</p>
                    </div>
                </div>
                <div class="analytics-card">
                    <h3>Geographic Distribution</h3>
                    <div class="chart-placeholder">
                        <i class="fas fa-map"></i>
                        <p>Map would show submission locations</p>
                    </div>
                </div>
                <div class="analytics-card">
                    <h3>User Activity</h3>
                    <div class="chart-placeholder">
                        <i class="fas fa-chart-bar"></i>
                        <p>Chart would show user engagement metrics</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Submission Review Modal -->
    <div id="submission-review-modal" class="modal large">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Review Submission</h3>
                <button class="modal-close" onclick="closeSubmissionModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="submission-review-content" id="submission-review-content">
                    <!-- Submission details will be populated by JavaScript -->
                </div>
                <div class="review-actions">
                    <button class="btn btn-success" onclick="approveSubmission()">
                        <i class="fas fa-check"></i> Approve
                    </button>
                    <button class="btn btn-warning" onclick="editSubmission()">
                        <i class="fas fa-edit"></i> Edit
                    </button>
                    <button class="btn btn-danger" onclick="rejectSubmission()">
                        <i class="fas fa-times"></i> Reject
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- User Management Modal -->
    <div id="user-management-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Manage User</h3>
                <button class="modal-close" onclick="closeUserModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="user-management-form">
                    <div class="form-group">
                        <label for="user-role">User Role</label>
                        <select id="user-role" name="user-role">
                            <option value="general">General Public</option>
                            <option value="artist">Artist</option>
                            <option value="admin">Administrator</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="user-status">Account Status</label>
                        <select id="user-status" name="user-status">
                            <option value="active">Active</option>
                            <option value="suspended">Suspended</option>
                            <option value="deactivated">Deactivated</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-outline" onclick="closeUserModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Update User</button>
                        <button type="button" class="btn btn-danger" onclick="deleteUser()">Delete User</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Category Modal -->
    <div id="category-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="category-modal-title">Add Category</h3>
                <button class="modal-close" onclick="closeCategoryModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="category-form">
                    <div class="form-group">
                        <label for="category-type">Category Type</label>
                        <select id="category-type" name="category-type" required>
                            <option value="">Select type</option>
                            <option value="art-type">Art Type</option>
                            <option value="art-period">Art Period</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="category-name">Category Name</label>
                        <input type="text" id="category-name" name="category-name" required>
                    </div>
                    <div class="form-group">
                        <label for="category-description">Description</label>
                        <textarea id="category-description" name="category-description" rows="3"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-outline" onclick="closeCategoryModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save Category</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/map.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
